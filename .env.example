# Auto Report 环境变量配置文件示例
# 复制此文件为 .env 并根据实际环境修改配置

# ==================== 项目配置 ====================
# 项目名称（用于Docker Compose项目隔离）
COMPOSE_PROJECT_NAME=auto-report

# ==================== 后端配置 ====================
# Spring Boot 配置文件
SPRING_PROFILES_ACTIVE=docker

# 应用配置
SERVER_PORT=8080
SERVER_SERVLET_CONTEXT_PATH=/

# JWT配置
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRATION=86400000 # 24小时

# ==================== 数据库配置 ====================
# MySQL数据库配置
SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/auto_report?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false
SPRING_DATASOURCE_USERNAME=auto_report_user
SPRING_DATASOURCE_PASSWORD=auto_report_password

# 数据库连接池配置
SPRING_DATASOURCE_HIKARI_MAXIMUM-POOL-SIZE=20
SPRING_DATASOURCE_HIKARI_MINIMUM-IDLE=5
SPRING_DATASOURCE_HIKARI_IDLE-TIMEOUT=300000
SPRING_DATASOURCE_HIKARI_CONNECTION-TIMEOUT=20000
SPRING_DATASOURCE_HIKARI_MAX-LIFETIME=1200000

# JPA配置
SPRING_JPA_HIBERNATE_DDL-AUTO=update
SPRING_JPA_SHOW-SQL=false
SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT=org.hibernate.dialect.MySQL8Dialect

# ==================== Redis配置 ====================
# Redis缓存配置
SPRING_REDIS_HOST=redis
SPRING_REDIS_PORT=6379
SPRING_REDIS_PASSWORD=
SPRING_REDIS_DATABASE=0
SPRING_REDIS_TIMEOUT=10000

# Redis连接池配置
SPRING_REDIS_LETTUCE_POOL_MAX-ACTIVE=20
SPRING_REDIS_LETTUCE_POOL_MAX-IDLE=10
SPRING_REDIS_LETTUCE_POOL_MIN-IDLE=5
SPRING_REDIS_LETTUCE_POOL_MAX-WAIT=3000

# ==================== 缓存配置 ====================
# 本地缓存配置
CACHE_TYPE=caffeine
CACHE_TTL=300

# ==================== 日志配置 ====================
# 日志级别
LOGGING_LEVEL_COM_AUTOREPORT=DEBUG
LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=INFO
LOGGING_LEVEL_ORG_HIBERNATE=WARN

# 日志文件配置
LOGGING_FILE_NAME=logs/application.log
LOGGING_FILE_MAX-SIZE=10MB
LOGGING_FILE_MAX-HISTORY=30

# ==================== 安全配置 ====================
# CORS配置
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_ALLOW_CREDENTIALS=true

# 安全配置
SECURITY_ENABLED=true
SECURITY_BCRYPT_STRENGTH=10

# ==================== 邮件配置 ====================
# SMTP邮件服务器配置（可选）
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USERNAME=your-email@example.com
MAIL_PASSWORD=your-email-password
MAIL_PROTOCOL=smtp
MAIL_SMTP_AUTH=true
MAIL_SMTP_STARTTLS_ENABLE=true
MAIL_FROM=no-reply@auto-report.com

# ==================== 文件上传配置 ====================
# 文件上传配置
FILE_UPLOAD_MAX_SIZE=10MB
FILE_UPLOAD_ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx
FILE_UPLOAD_LOCATION=uploads

# ==================== 监控配置 ====================
# Actuator监控端点配置
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics
MANAGEMENT_ENDPOINT_HEALTH_SHOW-DETAILS=always

# ==================== 前端配置 ====================
# 前端应用配置
FRONTEND_PORT=3000
FRONTEND_API_BASE_URL=http://localhost:8080/api

# ==================== Docker配置 ====================
# Docker镜像标签
BACKEND_IMAGE_TAG=latest
FRONTEND_IMAGE_TAG=latest

# ==================== 开发环境配置 ====================
# 开发环境特定配置（仅在开发环境生效）
if [ "$SPRING_PROFILES_ACTIVE" = "dev" ]; then
    SPRING_JPA_SHOW-SQL=true
    LOGGING_LEVEL_COM_AUTOREPORT=TRACE
    MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=*
fi

# ==================== 生产环境配置 ====================
# 生产环境特定配置（仅在生产环境生效）
if [ "$SPRING_PROFILES_ACTIVE" = "prod" ]; then
    SPRING_JPA_HIBERNATE_DDL-AUTO=validate
    SPRING_JPA_SHOW-SQL=false
    LOGGING_LEVEL_COM_AUTOREPORT=INFO
    MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info
fi